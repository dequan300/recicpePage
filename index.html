<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/style.css">
    <title>Document</title>
</head>
<body>
    <main>
        <form id="form">
        <label for="fileEl">photo</label>
        <input type="file"  accept="image/jpeg, image/png, image/jpg" id="fileEl">
        <input type="text" value="dequan" id="name">
        <button type="submit">Submit</button>
        </form>
     
    </main>
    <script>
       

            let form= document.querySelector("#form")
            let button=document.querySelector("button")
            

        
            let array=[]
            
            let recipeDate=JSON.parse(localStorage.getItem("data")) || []
                
                let input= document.getElementById("fileEl")
             input.addEventListener('change',()=>{
                const files= input.files
                for (let index = 0; index < files.length; index++) {
                    let reader = new FileReader()
                    reader.addEventListener('load',(e)=>{
                        const dataUrl= e.target.result
                        let nameV=document.querySelector("#name").value
                        let recipe={
                         nameV,
                        image:dataUrl
                        }
                        recipeDate.push(recipe)
                        localStorage.setItem("data",JSON.stringify(recipeDate))
                        console.log(recipeDate)
                    })  
                        reader.readAsDataURL(files[index]);

                    }

                        form.reset()
                        display()
                     })

            
            
    
       
        button.addEventListener("click",display())


        function display() {
  const container = document.createElement('div');
  container.id = 'imageContainer';

  for (const recipe of recipeDate) {
    const recipeElement = document.createElement('div');
    const nameElement = document.createElement('p');
    nameElement.textContent = recipe.nameV;
    const imageElement = document.createElement('img');
    imageElement.src = recipe.image;

    recipeElement.appendChild(nameElement);
    recipeElement.appendChild(imageElement);
    container.appendChild(recipeElement);
  }

  const existingContainer = document.getElementById('imageContainer');
  if (existingContainer) {
    existingContainer.remove();
  }

  document.body.appendChild(container);
}


        


    
    </script>
</body>
</html>